    /* Keep credits aligned left at all sizes */
    .last-updated { justify-content: flex-start !important; }
/* Responsive rules (extracted as-is from css/styles.css for safety) */

/* Keep filters in a single row on desktop */
@media (min-width: 1024px) {
    .filters-container { flex-wrap: nowrap; align-items: flex-end; }
    .filter-group { flex: 0 0 auto; }
}

/* Hide mobile toggles on desktop */
@media (min-width: 769px) {
    .mobile-sidebar-toggle,
    .mobile-legend-toggle,
    .mobile-filters-toggle {
        display: none !important;
    }
}

/* Hide legend on mobile by default (merged into main 768px block below) */

/* Tablet styles (768px and below) */
@media (max-width: 768px) {
    /* Legend visibility rules merged from the short 768px block */
    #map-legend { display: none; }
    #map-legend.show { display: block; position: fixed; bottom: 10px; left: 10px; right: 10px; z-index: 999; max-height: 50vh; overflow-y: auto; }
    /* Hide desktop header toggle buttons on mobile */
    #header-legend-toggle,
    #header-filters-toggle,
    #header-data-toggle { display: none !important; }
    .container { padding: 0 15px; }
    .select-filter { min-width: 160px; font-size: 0.9rem; }
    .year-group { margin-left: 0; }
    .header-layout { flex-direction: column; gap: 20px; align-items: stretch; }
    .title-section { text-align: left; }
    #filters-panel h1 { font-size: 1.4rem; margin-bottom: 10px; }
    .last-updated { justify-content: flex-start; flex-wrap: wrap; gap: 10px; }
    .filters-container { flex-direction: column; gap: 15px; }
    .filter-group { width: 100%; }
    #main-content { flex-direction: column; height: auto; min-height: calc(100vh - 200px); }
    #map-container { height: 60vh; min-height: 400px; }
    #sidebar { width: 100%; border-left: none; border-top: 1px solid var(--border-1); max-height: 40vh; }
    .mobile-sidebar-toggle,
    .mobile-legend-toggle,
    .mobile-filters-toggle { display: flex !important; }
    .mobile-sidebar-toggle { position: fixed; bottom: 10px; right: 10px; top: auto; padding: 8px 12px; font-size: 0.75rem; min-height: 40px; border-radius: 20px; z-index: 1002; }
    /* Ensure Filters pane shows as a bottom sheet on all mobile widths (<=768px) */
    #filters-pane.filters-container { display: none !important; }
    #filters-pane.filters-container.show {
        display: flex !important;
        position: absolute !important;
        top: 100% !important;
        bottom: auto !important;
        left: 0 !important;
        right: 0 !important;
        background: var(--surface-0) !important;
        border-top: 1px solid var(--border-1) !important;
        padding: 15px !important;
        max-height: 60vh !important;
        overflow-y: auto !important;
        z-index: 1100 !important;
        box-shadow: var(--shadow-2) !important;
    }
    .mobile-legend-toggle { position: fixed; bottom: 10px; right: 90px; top: auto; padding: 8px 12px; font-size: 0.75rem; min-height: 40px; border-radius: 20px; z-index: 1002; }
    .mobile-filters-toggle { position: fixed; bottom: 10px; right: 170px; top: auto; padding: 8px 12px; font-size: 0.75rem; min-height: 40px; border-radius: 20px; z-index: 1002; }
    .stat-grid { grid-template-columns: 1fr 1fr; gap: 10px; }
    #map-legend { bottom: 10px; left: 10px; right: 10px; min-width: auto; padding: 12px; }
    .legend-section { margin-bottom: 10px; }
    .legend-items { display: grid; grid-template-columns: repeat(2, 1fr); gap: 5px; }
    #earthquake-table { font-size: 0.8rem; }
    #earthquake-table th, #earthquake-table td { padding: 8px 6px; }
}

/* Mobile styles (480px and below) */
@media (max-width: 480px) {
    .container { padding: 0 10px; }
    /* Give the mobile header a little breathing room from screen edge */
    #filters-panel > .container { padding-left: 10px !important; padding-right: 10px !important; }
    .filters-container { gap: 15px; }
    .filter-group { width: 100%; }
    .select-filter { width: 100%; min-width: 0; font-size: 1rem; padding: 10px 12px; }
    .year-group { width: 100%; }
    .title-section { padding: 0 8px !important; text-align: left; }
    #filters-panel h1 { font-size: 1.1rem; margin-bottom: 6px; }
    .last-updated { font-size: 0.7rem; gap: 6px; }
    .filters-container { gap: 8px; }
    .filter-group { margin-bottom: 0; }
    .filters-container { display: flex; flex-direction: row; align-items: center; gap: 8px; justify-content: space-between; }
    .filter-group:first-child { flex: 0 0 auto; width: 90px; }
    .filter-group:first-child .filter-label { font-size: 0.75rem; margin-bottom: 4px; }
    .filter-group:last-child { flex: 1; display: flex; flex-direction: column; min-width: 0; }
    .filter-group:last-child .filter-label { margin-bottom: 4px; font-size: 0.75rem; text-align: left; }
    .year-range-container { width: 100%; }
    .year-slider-container { width: 150px; }
    .filter-label { font-size: 0.85rem; margin-bottom: 6px; }
    .custom-multiselect { width: 100%; }
    .filter-group:first-child .custom-multiselect { width: 100px; }
    .multiselect-trigger { padding: 10px 12px; font-size: 0.8rem; min-height: 40px; }
    .filter-group:first-child .multiselect-trigger { padding: 6px 8px; font-size: 0.7rem; }
    .filter-group:first-child .multiselect-text { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .multiselect-dropdown { max-height: 200px; }
    .multiselect-option { padding: 12px 15px; min-height: 44px; }
    .multiselect-option label { font-size: 0.85rem; }
    .date-input { padding: 12px; font-size: 0.9rem; min-height: 44px; }
    .apply-filters-btn { padding: 12px 20px; font-size: 0.9rem; min-height: 44px; width: 100%; }
    /* Unified Filters Pane as bottom sheet on mobile */
    #filters-pane.filters-container { display: none !important; }
    #filters-pane.filters-container.show {
        display: flex !important;
        position: absolute !important;
        top: 100% !important;
        bottom: auto !important;
        left: 0 !important;
        right: 0 !important;
        background: var(--surface-0) !important;
        border-top: 1px solid var(--border-1) !important;
        padding: 15px !important;
        max-height: 60vh !important;
        overflow-y: auto !important;
        z-index: 1100 !important;
        box-shadow: var(--shadow-2) !important;
    }

    /* Push header content down so it sits below mobile overlay buttons */
    #filters-panel { padding: 8px 0 !important; }
    /* Mobile header layout: title/credits left, actions right; hide header filters */
    .header-layout { flex-direction: row !important; align-items: center !important; gap: 8px !important; flex-wrap: nowrap !important; }
    #filters-pane.filters-container { display: none !important; }
    /* Allow the mobile Filters toggle to reveal the header filters panel */
    #filters-pane.filters-container.show { display: flex !important; }
    #filters-pane { overflow-y: auto !important; }
    .title-section { order: 1 !important; padding: 0px 0px 0 0px !important; text-align: left !important; flex: 1 1 auto !important; min-width: 0 !important; }
    .header-actions { position: absolute !important; top: 0px !important; right: 0px !important; margin: 0 !important; order: 2 !important; flex: 0 0 auto !important; z-index: 1001 !important; }
    /* Make mobile basemap toggle a bit smaller */
    .header-actions sl-switch#basemap-toggle::part(base) { --width: 54px; }
    sl-switch#basemap-toggle::part(control) { height: 22px; }
    sl-switch#basemap-toggle::part(thumb) { width: 22px; height: 22px; }
    /* Re-anchor light-mode rays/glow for smaller thumb center on mobile */
    sl-switch#basemap-toggle::part(control) {
        background-image:
            /* top gloss */
            linear-gradient(180deg, rgba(255,255,255,0.30), rgba(255,255,255,0)),
            /* thin rays, anchored near mobile thumb center */
            conic-gradient(from 0deg at 16px 50%,
                transparent 0 12deg, rgba(255,255,255,0.18) 12deg 12.8deg, transparent 12.8deg 24deg,
                rgba(255,255,255,0.16) 24deg 24.8deg, transparent 24.8deg 36deg,
                rgba(255,255,255,0.14) 36deg 36.8deg, transparent 36.8deg 180deg,
                transparent 180deg 332deg, rgba(255,255,255,0.12) 332deg 332.8deg, transparent 332.8deg 344deg,
                rgba(255,255,255,0.12) 344deg 344.8deg, transparent 344.8deg 360deg
            ),
            /* soft radial glow behind the sun */
            radial-gradient(circle at 16px 50%, rgba(253,230,138,0.55) 0%, rgba(253,230,138,0.0) 65%),
            /* warm base */
            linear-gradient(45deg, #f59e0b, #fbbf24);
    }
    header { padding: 6px 0 !important; min-height: 56px !important; }
    .title-section h1 { font-size: 1.1rem !important; margin: 0 !important; line-height: 1.2 !important; }
    .last-updated { font-size: 0.6rem !important; margin-top: 1px !important; }
    .credits-trigger { font-size: 0.6rem !important; }
    #main-content { flex-direction: column !important; height: calc(100vh - 72px) !important; min-height: calc(100vh - 72px) !important; }
    #sidebar { display: none !important; }
    #sidebar.show { display: block !important; position: fixed !important; bottom: 0 !important; left: 0 !important; right: 0 !important; max-height: 70vh !important; z-index: 1000 !important; background: var(--surface-0) !important; border-top: 1px solid var(--border-1) !important; box-shadow: var(--shadow-2) !important; }
    #map-container { flex: 1; width: 100%; height: 100%; min-height: calc(100vh - 55px); position: relative; display: block; }
    #map { width: 100% !important; height: 100% !important; min-height: 350px; display: block !important; }
    #sidebar { position: fixed; bottom: 0; left: 0; right: 0; width: 100%; max-height: 70vh; background: var(--surface-0); border-top: 2px solid var(--border-1); border-left: none; z-index: 1000; transform: translateY(100%); transition: transform 0.3s ease; overflow-y: auto; }
    #sidebar.show { transform: translateY(0); }
    .mobile-sidebar-toggle, .mobile-legend-toggle, .mobile-filters-toggle { display: inline-flex !important; }
    /* Place mobile action buttons at the top-right, to the left of the basemap toggle */
    .mobile-sidebar-toggle, .mobile-legend-toggle, .mobile-filters-toggle {
        position: absolute !important;
        top: 8px !important;
        left: auto !important;
        right: auto !important;
        bottom: auto !important;
        width: 28px !important;
        height: 28px !important;
        min-height: 28px !important;
        padding: 0 !important;
        border-radius: 14px !important;
        justify-content: center !important;
        align-items: center !important;
        gap: 0 !important;
        z-index: 1001 !important;
    }
    /* Order from left to right (moving toward the right edge): Legend, Filters, Data, Basemap */
    /* Leave ~60px at the far right for the basemap toggle; push buttons further left */
    .mobile-legend-toggle { right: 150px !important; }
    .mobile-filters-toggle { right: 115px !important; }
    .mobile-sidebar-toggle { right: 80px !important; }
    .mobile-legend-toggle .toggle-text,
    .mobile-filters-toggle .toggle-text,
    .mobile-sidebar-toggle .toggle-text { display: none !important; }
    .mobile-legend-toggle .toggle-icon,
    .mobile-filters-toggle .toggle-icon,
    .mobile-sidebar-toggle .toggle-icon { font-size: 0.9rem !important; }
    /* Increase button visibility with a soft halo/glow */
    .mobile-legend-toggle,
    .mobile-filters-toggle,
    .mobile-sidebar-toggle {
        background-color: var(--surface-0) !important;
        /* Light theme border tinted by brand */
        border: 1px solid rgba(37, 99, 235, 0.35) !important; /* #2563eb */
        /* inner ring + brand glow + drop shadow */
        box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.75), 0 0 0 10px rgba(37, 99, 235, 0.12), 0 6px 16px rgba(0,0,0,0.25) !important;
        -webkit-tap-highlight-color: transparent;
    }
    /* Dark theme: slightly stronger outer glow for contrast */
    :root[data-theme='dark'] .mobile-legend-toggle,
    :root[data-theme='dark'] .mobile-filters-toggle,
    :root[data-theme='dark'] .mobile-sidebar-toggle {
        box-shadow: 0 0 0 2px rgba(11, 16, 32, 0.85), 0 0 0 12px rgba(96, 165, 250, 0.30), 0 8px 22px rgba(0,0,0,0.45) !important; /* surface-0 dark; #60a5fa */
        border-color: rgba(96, 165, 250, 0.45) !important;
    }
    .mobile-legend-toggle:hover,
    .mobile-legend-toggle:focus-visible,
    .mobile-filters-toggle:hover,
    .mobile-filters-toggle:focus-visible,
    .mobile-sidebar-toggle:hover,
    .mobile-sidebar-toggle:focus-visible {
        box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.9), 0 0 0 14px rgba(37, 99, 235, 0.20), 0 10px 28px rgba(0,0,0,0.30) !important;
        outline: none !important;
    }
    #map-container.sidebar-open { height: 50vh; }
    .stat-grid { grid-template-columns: 1fr; gap: 8px; }
    .stat-item { padding: 12px; }
    .stat-value { font-size: 1.3rem; }
    .stat-label { font-size: 0.75rem; }
    #map-legend { position: fixed; bottom: 10px; left: 10px; right: 10px; padding: 10px; max-height: 30vh; overflow-y: auto; }
    #map-legend h3 { font-size: 1rem; margin-bottom: 10px; }
    .legend-section h4 { font-size: 0.85rem; margin-bottom: 6px; }
    .legend-item { font-size: 0.75rem; gap: 6px; }
    .legend-circle { width: 10px; height: 10px; }
    .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
    #earthquake-table { font-size: 0.7rem; min-width: 100%; width: 100%; table-layout: fixed; }
    #earthquake-table th:nth-child(1), #earthquake-table td:nth-child(1) { width: 25%; padding: 6px 3px; font-size: 0.65rem; }
    #earthquake-table th:nth-child(2), #earthquake-table td:nth-child(2) { width: 15%; padding: 6px 3px; text-align: center; }
    #earthquake-table th:nth-child(3), #earthquake-table td:nth-child(3) { width: 15%; padding: 6px 3px; text-align: center; }
    #earthquake-table th:nth-child(4), #earthquake-table td:nth-child(4) { width: 10%; padding: 6px 2px; text-align: center; font-size: 0.6rem; }
    #earthquake-table th:nth-child(5), #earthquake-table td:nth-child(5) { width: 35%; padding: 6px 3px; font-size: 0.65rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    #data-table-panel { padding: 15px; }
    #data-table-panel h3 { font-size: 1rem; margin-bottom: 10px; }
    .pagination-controls { flex-wrap: wrap; gap: 5px; justify-content: center; }
    .page-number { min-width: 36px; height: 36px; font-size: 0.8rem; }
    .pagination-info { width: 100%; text-align: center; margin-bottom: 10px; font-size: 0.75rem; }
    .credits-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90vw; max-width: 300px; z-index: 2000; }
    .loading-overlay { backdrop-filter: blur(2px); }
    .loading-spinner { width: 40px; height: 40px; }
}

/* Very small mobile devices (320px and below) */
@media (max-width: 320px) {
    #filters-panel h1 { font-size: 1.1rem; }
    .last-updated { font-size: 0.7rem; }
    #map-container { height: 45vh; min-height: 250px; }
    #sidebar { max-height: 60vh; }
    .mobile-sidebar-toggle { bottom: 15px; right: 15px; padding: 10px 14px; }
    .toggle-icon { font-size: 1rem; }
    .toggle-text { font-size: 0.75rem; }
    .stat-value { font-size: 1.2rem; }
    #earthquake-table { font-size: 0.7rem; }
    .page-number { min-width: 32px; height: 32px; font-size: 0.75rem; }
}

/* Ultra-small layout: keep buttons on the right; split into two rows if needed */
@media (max-width: 360px) {
    header { min-height: 72px !important; }
    /* Keep basemap toggle top-right */
    .header-actions { top: 8px !important; right: 8px !important; }
    /* First row (right side): Legend, Filters */
    .mobile-legend-toggle { top: 8px !important; right: 130px !important; left: auto !important; }
    .mobile-filters-toggle { top: 8px !important; right: 94px !important; left: auto !important; }
    /* Second row (right side): Data */
    .mobile-sidebar-toggle { top: 40px !important; right: 130px !important; left: auto !important; }
}

/* Additional responsive blocks retained */
@media (min-width: 769px) and (max-width: 1200px) {
    #sidebar { width: 300px; }
    .stat-grid { grid-template-columns: 1fr; gap: 10px; }
}
/* Removed duplicate 768px block; merged .legend-items rule into first 768px section */
