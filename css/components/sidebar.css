/* Sidebar styles - combines table and statistics components */

/* ===== STATISTICS PANEL ===== */
/* Statistics panel (extracted from css/styles.css) */
#statistics-panel { padding: 16px; border-bottom: 1px solid var(--border-1); color: var(--text-1); }
#statistics-panel h2 { font-size: 1.3rem; margin-bottom: 16px; color: var(--text-2); }
.stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.stat-item { text-align: center; padding: 14px; background: var(--surface-1); border: 1px solid var(--border-1); border-radius: var(--radius-1); }
.stat-value { font-size: 1.5rem; font-weight: bold; color: var(--brand-600); margin-bottom: 5px; }
.stat-label { font-size: 0.8rem; color: var(--text-muted); line-height: 1.2; }

/* ===== DATA TABLE ===== */
/* Data table (extracted from css/styles.css) */
.table-container { flex: 1; overflow-y: auto; overflow-x: hidden; border: 0; border-radius: 0; }
/* prevent horizontal scroll within the sidebar for the table */

/* Data table panel container */
#data-table-panel { flex: 1; padding: 8px 16px 16px; display: flex; flex-direction: column; }
#data-table-panel h3 { font-size: 1.1rem; margin-bottom: 12px; color: var(--text-2); }

/* Shoelace-aligned card header and base for the data table card (theme-aware) */
.table-card::part(header) { background: var(--surface-0); border-bottom: 1px solid var(--border-1); color: var(--text-1); font-weight: 600; }
.table-card::part(base) { border: 1px solid var(--border-1); box-shadow: var(--shadow-1); background: var(--surface-0); color: var(--text-1); }

#earthquake-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; color: var(--text-1); table-layout: fixed; }
#earthquake-table th { display: none; }
#earthquake-table td { padding: 10px 8px; border-bottom: 1px solid var(--border-1); }
#earthquake-table tbody tr:hover { background-color: var(--surface-1); }
#earthquake-table tbody tr.highlighted { background-color: var(--sl-color-primary-100) !important; animation: highlight-pulse 0.5s ease-in-out; }
@keyframes highlight-pulse { 0% { background-color: var(--brand-600); } 100% { background-color: var(--sl-color-primary-100); } }

.earthquake-row { cursor: pointer; transition: background-color 0.2s; border-left: 4px solid transparent; }
.earthquake-row.mag-minor { border-left-color: var(--mag-minor); }
.earthquake-row.mag-light { border-left-color: var(--mag-light); }
.earthquake-row.mag-moderate { border-left-color: var(--mag-moderate); }
.earthquake-row.mag-strong { border-left-color: var(--mag-strong); }
.earthquake-row.mag-major { border-left-color: var(--mag-major); }

.magnitude-cell { display: flex; align-items: center; gap: 8px; }
.magnitude-cell .magnitude-indicator { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }

/* Magnitude badge (table) */
.mag-cell { text-align: center; }
.mag-badge { display: inline-flex; align-items: center; justify-content: center; min-width: 28px; height: 28px; padding: 0 8px; border-radius: 9999px; color: var(--text-on-accent); font-weight: 700; font-size: 0.85rem; letter-spacing: 0.02em; box-shadow: 0 0 0 1px rgba(0,0,0,0.04) inset; }
.mag-badge.minor { background-color: var(--mag-minor); }
.mag-badge.light { background-color: var(--mag-light); color: var(--text-1); }
.mag-badge.moderate { background-color: var(--mag-moderate); color: var(--text-1); }
.mag-badge.strong { background-color: var(--mag-strong); }
.mag-badge.major { background-color: var(--mag-major); }

/* Table Sort Controls */
.table-sort-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 2px;
    margin-bottom: 16px;
    flex-wrap: nowrap;
    padding: 0 1px;
    overflow: hidden;
}

/* Sorting buttons - match header button styling */
.sortable { 
    cursor: pointer; 
    user-select: none; 
    position: relative; 
    font-weight: 600;
    font-size: 0.8rem;
    font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    --sl-button-font-size-small: 11px;
    --sl-button-padding-small: 6px 3px;
    --sl-button-height-small: 30px;
    --sl-button-border-radius-small: var(--radius-2);
    --sl-button-color: var(--text-2);
    --sl-button-background-color: var(--surface-0);
    --sl-button-border-color: var(--border-1);
    --sl-button-shadow: var(--shadow-1);
    --sl-button-transition: all var(--transition-med) var(--easing);
    --sl-button-hover-color: var(--text-2);
    --sl-button-hover-background-color: var(--surface-1);
    --sl-button-hover-border-color: var(--border-2);
    --sl-button-hover-shadow: var(--shadow-2);
    --sl-button-hover-transform: translateY(-1px);
    --sl-button-focus-shadow: 0 0 0 3px var(--ring-color), var(--shadow-2);
    --sl-button-active-color: var(--text-on-accent);
    --sl-button-active-background-color: var(--accent-600);
    --sl-button-active-border-color: var(--accent-600);
    --sl-button-active-shadow: var(--shadow-3);
    --sl-button-active-transform: translateY(-1px);
}

.sort-indicator { 
    margin-left: 5px; 
    opacity: 0.4; 
    width: 16px;
    height: 16px;
    fill: currentColor;
    transition: all var(--transition-fast) var(--easing);
}

.sort-indicator.active { 
    opacity: 1; 
    fill: var(--accent-600);
}

.sort-indicator.active.asc { 
    transform: rotate(180deg);
    fill: var(--accent-600);
}

.sort-indicator.active.desc { 
    transform: rotate(0deg);
    fill: var(--accent-600);
}

/* Active sort button styling */
.sortable.active {
    --sl-button-color: var(--text-on-accent);
    --sl-button-background-color: var(--accent-600);
    --sl-button-border-color: var(--accent-600);
    --sl-button-shadow: var(--shadow-3);
    --sl-button-transform: translateY(-1px);
}

/* Ensure the arrow stays visible when the button is active (blue background) - dark mode only */
:root[data-theme='dark'] .sortable.active .sort-indicator,
:root[data-theme='dark'] .sortable.active .sort-indicator.active,
:root[data-theme='dark'] .sortable.active .sort-indicator.asc,
:root[data-theme='dark'] .sortable.active .sort-indicator.desc {
    fill: var(--text-on-accent) !important;
    opacity: 1;
}

/* Dark theme: match header button styling exactly */
:root[data-theme='dark'] .sortable {
    --sl-button-color: var(--text-1);
    --sl-button-background-color: var(--surface-0);
    --sl-button-border-color: var(--border-2);
    --sl-button-shadow: 0 2px 10px rgba(0,0,0,0.45), 0 0 15px rgba(96, 165, 250, 0.25), 0 0 5px rgba(255, 255, 255, 0.1);
    --sl-button-hover-color: var(--text-1);
    --sl-button-hover-background-color: var(--surface-1);
    --sl-button-hover-border-color: var(--accent-600);
    --sl-button-hover-shadow: 0 2px 14px rgba(0,0,0,0.5), 0 0 20px rgba(96,165,250,0.35), 0 0 8px rgba(255, 255, 255, 0.15);
    --sl-button-focus-shadow: 0 6px 20px rgba(0,0,0,0.25), 0 0 15px rgba(96, 165, 250, 0.3), var(--shadow-2);
    --sl-button-active-color: var(--text-on-accent);
    --sl-button-active-background-color: var(--accent-600);
    --sl-button-active-border-color: var(--accent-600);
    --sl-button-active-shadow: 0 8px 28px rgba(0,0,0,0.28), 0 0 25px rgba(96, 165, 250, 0.4), 0 0 10px rgba(255, 255, 255, 0.2);
}

/* Ensure dark mode sort buttons are clearly visible */
:root[data-theme='dark'] .sortable::part(base) {
    background-color: var(--surface-0) !important;
    color: var(--text-1) !important;
    border-color: var(--border-2) !important;
}

/* Dark mode hover state overrides for sort buttons */
:root[data-theme='dark'] .sortable:hover::part(base) {
    background-color: var(--surface-1) !important;
    color: var(--text-1) !important;
    border-color: var(--accent-600) !important;
}

/* Dark mode active state overrides for sort buttons */
:root[data-theme='dark'] .sortable.active::part(base) {
    background-color: var(--accent-600) !important;
    color: var(--text-on-accent) !important;
    border-color: var(--accent-600) !important;
}

/* Dark mode active sort button styling */
:root[data-theme='dark'] .sortable.active {
    --sl-button-color: var(--text-on-accent);
    --sl-button-background-color: var(--accent-600);
    --sl-button-border-color: var(--accent-600);
    --sl-button-shadow: 0 8px 28px rgba(0,0,0,0.28), 0 0 25px rgba(96, 165, 250, 0.4), 0 0 10px rgba(255, 255, 255, 0.2);
    --sl-button-transform: translateY(-1px);
}

/* Dark mode arrow visibility fixes */
:root[data-theme='dark'] .sort-indicator {
    fill: var(--text-2);
    opacity: 0.5;
}

:root[data-theme='dark'] .sort-indicator.active {
    fill: var(--accent-600);
    opacity: 1;
}

/* Responsive design for sort controls */
@media (max-width: 768px) {
    .table-sort-controls {
        gap: 2px;
        margin-bottom: 12px;
        padding: 0 1px;
    }
    
    .sortable {
        font-size: 0.75rem;
        --sl-button-font-size-small: 10px;
        --sl-button-padding-small: 4px 3px;
        --sl-button-height-small: 26px;
    }
    
    .sort-indicator {
        width: 13px;
        height: 13px;
        margin-left: 4px;
    }
}

@media (max-width: 480px) {
    .table-sort-controls {
        gap: 1px;
        padding: 0 1px;
    }
    
    .sortable {
        font-size: 0.7rem;
        --sl-button-font-size-small: 9px;
        --sl-button-padding-small: 3px 2px;
        --sl-button-height-small: 24px;
    }
    
    .sort-indicator {
        width: 12px;
        height: 12px;
        margin-left: 3px;
    }
}

/* Very small devices - ensure buttons always fit */
@media (max-width: 380px) {
    .table-sort-controls {
        flex-wrap: wrap;
        gap: 2px;
        padding: 0;
        overflow: visible;
        justify-content: center;
        margin-bottom: 12px;
    }
    
    .sortable {
        font-size: 0.65rem;
        --sl-button-font-size-small: 8px;
        --sl-button-padding-small: 2px 1px;
        --sl-button-height-small: 22px;
        min-width: 0;
        flex: 0 1 auto;
    }
    
    .sort-indicator {
        width: 10px;
        height: 10px;
        margin-left: 2px;
    }
}

/* Pagination */
#pagination { margin-top: 15px; display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; }
.pagination-info { color: var(--text-muted); }
.pagination-controls { display: flex; align-items: center; gap: 10px; }
.pagination-controls sl-button.pagination-btn { margin: 0 4px; }

/* Dark theme: match our bluish dark mode theme for pagination buttons */
:root[data-theme='dark'] .pagination-controls sl-button.pagination-btn {
	--sl-button-color: var(--text-1);
	--sl-button-background-color: var(--surface-0);
	--sl-button-border-color: var(--border-2);
	--sl-button-shadow: 0 2px 10px rgba(0,0,0,0.45), 0 0 15px rgba(96, 165, 250, 0.25), 0 0 5px rgba(255, 255, 255, 0.1);
	--sl-button-hover-color: var(--text-1);
	--sl-button-hover-background-color: var(--surface-1);
	--sl-button-hover-border-color: var(--accent-600);
	--sl-button-hover-shadow: 0 2px 14px rgba(0,0,0,0.5), 0 0 20px rgba(96,165,250,0.35), 0 0 8px rgba(255, 255, 255, 0.15);
	--sl-button-focus-shadow: 0 6px 20px rgba(0,0,0,0.25), 0 0 15px rgba(96, 165, 250, 0.3), var(--shadow-2);
	--sl-button-active-color: var(--text-on-accent);
	--sl-button-active-background-color: var(--accent-600);
	--sl-button-active-border-color: var(--accent-600);
	--sl-button-active-shadow: 0 8px 28px rgba(0,0,0,0.28), 0 0 25px rgba(96, 165, 250, 0.4), 0 0 10px rgba(255, 255, 255, 0.2);
}

/* Ensure dark mode pagination buttons are clearly visible */
:root[data-theme='dark'] .pagination-controls sl-button.pagination-btn::part(base) {
	background-color: var(--surface-0) !important;
	color: var(--text-1) !important;
	border-color: var(--border-2) !important;
}

/* Dark mode hover state overrides for pagination buttons */
:root[data-theme='dark'] .pagination-controls sl-button.pagination-btn:hover::part(base) {
	background-color: var(--surface-1) !important;
	color: var(--text-1) !important;
	border-color: var(--accent-600) !important;
}

/* Dark mode active state overrides for pagination buttons */
:root[data-theme='dark'] .pagination-controls sl-button.pagination-btn:not([disabled])::part(base) {
	background-color: var(--accent-600) !important;
	color: var(--text-on-accent) !important;
	border-color: var(--accent-600) !important;
}
#page-numbers { display: flex; gap: 5px; }
.page-number { padding: 6px 10px; border: 1px solid var(--border-1); background: var(--surface-0); color: var(--text-1); cursor: pointer; border-radius: 6px; font-size: 0.8rem; min-width: 32px; text-align: center; transition: all 0.2s; box-shadow: var(--shadow-1); }
.page-number:hover { background: var(--surface-1); }
.page-number.active { background: var(--brand-600); color: var(--text-on-accent); border-color: var(--brand-600); box-shadow: var(--shadow-2); }

/* --- Event Card Rows (inside table) --- */
/* Increase specificity so we can avoid !important while overriding table cell defaults */
#earthquake-table td.card-cell { padding: 0; border-bottom: none; }
.event-card { display: flex; flex-direction: column; gap: 10px; padding: 12px 14px; background: var(--surface-0); border-radius: 10px; border: 1px solid var(--border-1); box-shadow: var(--shadow-1); }
.earthquake-row:hover .event-card { background: var(--surface-1); }
.earthquake-row.highlighted .event-card { outline: 2px solid var(--brand-600); outline-offset: 0; }

.event-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.event-left { display: flex; align-items: center; gap: 12px; min-width: 0; }
.event-magnitude .mag-badge { min-width: 36px; height: 36px; font-size: 0.95rem; padding: 0 10px; }
.event-primary { display: flex; flex-direction: column; min-width: 0; }
.event-location { font-weight: 700; color: var(--text-1); line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.event-region { color: var(--text-3); font-size: 0.8rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.event-time { text-align: right; display: flex; flex-direction: column; gap: 2px; min-width: 0; }
.event-time .time-ago { font-weight: 600; color: var(--text-1); }
.event-time .exact-date { color: var(--text-3); font-size: 0.8rem; }
.event-time .exact-time { color: var(--text-3); font-size: 0.8rem; }

.event-details { display: grid; grid-template-columns: minmax(64px, auto) 1fr auto; column-gap: 6px; row-gap: 6px; padding-top: 6px; border-top: 1px dashed var(--border-1); align-items: start; }
.detail-item { display: flex; flex-direction: column; gap: 2px; min-width: 0; }
.detail-felt { justify-self: end; text-align: right; white-space: nowrap; }
.detail-label { color: var(--text-3); font-size: 0.7rem; text-transform: uppercase; letter-spacing: .04em; }
.detail-value { color: var(--text-1); font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.detial-distance {align-items: center;}
.detail-distance .detail-label, .detail-distance .detail-value { padding-left: 40px; }

.felt-none { color: var(--text-3); }
