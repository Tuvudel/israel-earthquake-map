/* ===== FILTERS RESPONSIVE STYLES ===== */
/* Component-specific responsive styles for filters */

/* ===== FILTERS RESPONSIVE STYLES ===== */

/* ===== DESKTOP FILTER PANE STYLES ===== */
/* Desktop: allow dropdowns to overflow the pane and tighten spacing */
@media (min-width: 1024px) {
    #filters-pane.filters-container { 
        overflow: visible; 
        gap: 18px;    
    }

    /* ===== DESKTOP INLINE LAYOUT OVERRIDE ===== */
    /* Force inline layout for all three filter groups on desktop */
    #filters-pane.filters-container {
        display: flex !important;
        flex-direction: row !important;
        align-items: flex-start !important;
    }

    /* Ensure all filter groups take equal space and display inline */
    #filters-pane.filters-container .magnitude-group,
    #filters-pane.filters-container .location-filters-group,
    #filters-pane.filters-container .year-group {
        flex: 1 1 0% !important; /* Equal space distribution */
        width: auto !important; /* Override mobile width: 100% */
        min-width: 0 !important; /* Allow shrinking */
        margin-bottom: 0 !important; /* Remove any bottom margin */
    }

    /* Force location filters to display inline on desktop */
    #filters-pane.filters-container .location-filters-group {
        display: flex !important;
        flex-direction: row !important; /* Override mobile column layout */
        flex-wrap: nowrap !important;
        gap: var(--spacing-4) !important;
    }

    /* Ensure location filter items are properly sized */
    #filters-pane.filters-container .location-filter-item {
        flex: 1 1 auto !important;
        min-width: 0 !important;
        width: auto !important;
    }

    /* ===== DESKTOP DATE FILTER LAYOUT ===== */
    /* Ensure date mode row displays properly on desktop */
    #filters-pane.filters-container .date-mode-row {
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        gap: var(--spacing-2) !important;
    }

    /* Ensure date summary appears inline to the right */
    #filters-pane.filters-container .date-summary {
        flex: none !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: flex-start !important;
        justify-content: center !important;
    }

}

/* ===== TABLET STYLES (768px and below) ===== */
@media (max-width: 768px) {
	/* Shoelace Select Responsive Styling */
	.filter-group sl-select {
		width: 100%;
		--sl-input-font-size-medium: 0.85rem;
		--sl-input-padding-medium: 10px 12px;
		--sl-input-height-medium: 40px;
	}
    /* ===== FILTERS PANEL ===== */
    /* Higher specificity to override base styles */
    #filters-pane.filters-container,
    .filters-container { 
        display: flex !important;
        flex-direction: column !important;
        gap: var(--spacing-4) !important;
        padding: 12px 16px; /* Optimized mobile padding */
    }
    .filter-group { 
        width: 100%; 
        margin-bottom: 0; /* Remove any bottom margin */
    }
    .select-filter { 
        min-width: 160px; 
        font-size: 0.9rem; 
    }
    .year-group { 
        /* No margin needed with flexbox gap */
    }
    
    /* ===== FILTERS PANE OVERLAY ===== */
    /* Mobile-specific filter pane - unified height management */
    #filters-pane.filters-container { 
        display: none; 
        /* Base state - hidden and translated up */
        transform: translateY(-100%);
        opacity: 0;
        /* Enhanced mobile animations */
        transition: transform var(--mobile-animation-duration-slow) var(--mobile-animation-easing-smooth),
                    opacity var(--mobile-animation-duration-slow) var(--mobile-animation-easing-smooth),
                    box-shadow var(--mobile-animation-duration-slow) var(--mobile-animation-easing-smooth);
        /* Performance optimizations for mobile */
        will-change: transform, opacity;
        touch-action: pan-y;
    }
    
    #filters-pane.filters-container.show {
        display: flex;
        position: absolute;
        top: 100%;
        bottom: auto;
        left: 0;
        right: 0;
        background: rgba(255,255,255,0.95);
        backdrop-filter: none;
        border-top: 1px solid var(--glass-border);
        padding: 12px 16px; /* Consistent mobile padding */
        /* FIXED HEIGHT: Prevent shrinking when switching modes */
        height: 400px; /* Fixed height for mobile filter pane */
        max-height: 400px; /* Ensure consistent height */
        overflow-y: auto; /* Enable scrolling when needed */
        overflow-x: hidden;
        z-index: 2000;
        box-shadow: var(--shadow-2);
        pointer-events: auto;
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        /* Enhanced mobile animations */
        transition: transform var(--mobile-animation-duration-slow) var(--mobile-animation-easing-smooth),
                    opacity var(--mobile-animation-duration-slow) var(--mobile-animation-easing-smooth),
                    box-shadow var(--mobile-animation-duration-slow) var(--mobile-animation-easing-smooth);
    }
    
    /* Mobile filter pane backdrop animation */
    #filters-backdrop {
        opacity: 0;
        transition: opacity var(--mobile-animation-duration-normal) var(--mobile-animation-easing);
        background: rgba(0, 0, 0, 0.3);
    }
    
    #filters-backdrop.show {
        opacity: 1;
        transition: opacity var(--mobile-animation-duration-normal) var(--mobile-animation-easing);
    }
    
    /* Mobile filter pane sizing - fixed height layout */
    #filters-pane.filters-container {
        /* Fixed height management - no dynamic calculations */
        padding: 12px 16px;
        overflow-y: auto; /* Enable scrolling when needed */
    }
    

    
    /* ===== FILTER COMPONENT OVERRIDES ===== */
    /* Filter Controls */
    .date-filter-card .collapsible { 
        min-height: 0; 
    }
    .date-mode-toggle { 
        margin-bottom: 4px; 
    }
    .relative-options { 
        margin-top: 0px; 
        margin-bottom: 0px; 
    }
    
    /* Remove conflicting max-height rule */
    /* #filters-pane.filters-container { 
        max-height: 75vh; 
    } */
    
    /* Ensure all filter groups take full width on mobile - higher specificity */
    #filters-pane.filters-container .magnitude-group,
    #filters-pane.filters-container .location-filters-group,
    #filters-pane.filters-container .year-group,
    .magnitude-group,
    .location-filters-group,
    .year-group { 
        width: 100%;
        min-width: 0; /* Allow shrinking */
        flex: 0 1 auto; /* Stack naturally in column layout */
        margin-bottom: 0; /* Remove any bottom margin */
    }
    
    /* Location filter items on mobile - ensure proper stacking with higher specificity */
    #filters-pane.filters-container .location-filters-group,
    .location-filters-group {
        display: flex !important;
        flex-direction: column !important;
        flex-wrap: nowrap !important;
        width: 100% !important;
    
    }
    
    .location-filter-item {
        flex: 1 1 auto !important;
        margin-bottom: 0;
        width: 100% !important;
        min-width: 0 !important; /* Override the 180px min-width from base styles */
        display: flex !important;
        flex-direction: column !important;
        gap: var(--spacing-2) !important;
    }
    
    .year-slider-container,
    .magnitude-slider-container,
    #magnitude-range-container { 
        width: 100%; 
        max-width: 100%; 
        padding: 0 6px 1px 6px; /* Absolute minimal padding for mobile */
        box-sizing: border-box; 
        margin-bottom: 0; /* Remove bottom margin */
    }
    
    /* Remove extra bottom space from date filter components */
    .date-filter-card {
        padding-bottom: 0;
        margin-bottom: 0;
    }
    
    .relative-options {
        margin-bottom: 0;
        padding-bottom: 0;
    }
    
    /* Reduce gap in year group on mobile for tighter spacing */
    .year-group {
        gap: var(--spacing-2) !important; /* Reduced from var(--spacing-4) */
    }
    
    .date-mode-row {
        margin-bottom: 0;
        padding-bottom: 0;
        /* Ensure proper layout on mobile */
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        gap: var(--spacing-2) !important;
    }
    
    /* Filter Sliders */
    #year-range-slider .noUi-pips,
    #magnitude-range-slider .noUi-pips { 
        width: 100%; 
        transform: translateX(-4px); /* Adjusted positioning for better mobile alignment */
        margin-top: 0; /* Ensure no extra space */
    }

    /* Optimize slider container spacing on mobile */
    .year-group .year-slider-container,
    .year-group .magnitude-slider-container,
    .year-group #magnitude-range-container { 
        width: 100%; 
        max-width: 100%; 
        padding: 0 6px 1px 6px; /* Absolute minimal padding for mobile */
        box-sizing: border-box; 
        margin-bottom: 0; /* Remove bottom margin */
    }
}

/* ===== SMALL MOBILE STYLES (480px and below) ===== */
@media (max-width: 480px) {
	/* Shoelace Select Small Mobile Styling */
	.filter-group sl-select {
		width: 100%;
		--sl-input-font-size-medium: 0.9rem;
		--sl-input-padding-medium: 8px 10px;
		--sl-input-height-medium: 36px;
	}
    /* ===== FILTERS ===== */
    #filters-pane.filters-container,
    .filters-container { 
        gap: var(--spacing-3) !important; /* Increased gap for small mobile */
        padding: 10px 12px; /* Reduced padding for small mobile */
    }
    .filter-group { 
        width: 100%; 
        margin-bottom: 0; 
    }
    .select-filter { 
        width: 100%; 
        min-width: 0; 
        font-size: 1rem; 
        padding: 10px 12px; 
    }
    
    .year-group { 
        width: 100%; 
        margin-bottom: 0;
    }
    #filters-pane.filters-container { 
        display: none; 
    }
    #filters-pane.filters-container.show { 
        display: flex; 
        /* Fixed height for small mobile */
        height: 330px; /* Slightly smaller for small mobile */
        max-height: 350px;
    }
    #filters-pane { 
        overflow-y: auto; /* Enable scrolling when needed */
    }
    
    /* Ensure proper stacking on small mobile */
    #filters-pane.filters-container .location-filters-group,
    .location-filters-group {
        display: flex !important;
        flex-direction: column !important;
        gap: var(--spacing-3) !important; /* Increased gap for small mobile */
        margin-top: var(--spacing-6) !important; /* Increased top margin for small mobile to prevent overlap */
    }
    
    /* ===== MISC ===== */
    #magnitude-range-container {
        margin: 0px 0 0px 0;
        padding: 0 2px 2px 2px; /* Reduced padding for small mobile */
    }
    
    /* Further optimize year slider container on small mobile */
    .year-group .year-slider-container {
        padding: 0 4px 1px 4px; /* Absolute minimal padding for small mobile */
    }
}

/* ===== TABLET LAYOUT (768px - 1023px) ===== */
@media (max-width: 1023px) and (min-width: 769px) {
    .filters-container { 
        gap: var(--spacing-5);
    }
    
    .magnitude-group,
    .location-filters-group,
    .year-group { 
        flex: 1 1 0%;
        min-width: 0; /* Allow shrinking */
    }
    
    .location-filters-group { 
        gap: var(--spacing-4);
        flex-direction: row;
    }
}
